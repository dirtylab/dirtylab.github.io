{% capture buildPath %}{{include.pathprefix}}/{{include.resource.path}}{% endcapture %}
{% capture checkPath %}{{buildPath}}.html{% endcapture %}
{% capture liClass %}
    {% if page.url == checkPath %}
        current
    {% endif %}
{% endcapture %}
{% if include.resource.folder %}
    <li class="{{liClass}} section">
        {% if include.resource.file %}
            <a href="{{buildPath}}.html" class=" hint--bounce hint--right" data-hint="{{include.resource.hover}}">
                <span>{{ include.resource.name }}</span>
            </a>
        {% else %}
            <span class=" hint--bounce hint--right" data-hint="{{include.resource.hover}}">{{ include.resource.name }}</span>
        {% endif %}
        <ul>
            {% if include.resource.autoparse %}
            {% for file in site.files %}
            {% capture buildPath %}{{include.pathprefix}}/{{include.resource.path}}/{% endcapture %}
            {% capture filePath %}/{{file}}{% endcapture %}
            {% if filePath contains buildPath %}
            <li>
                <a href="{{filePath}}.html">
                    <span>{{ filePath | replace: buildPath, '' }}</span>
                </a>
            </li>
            {% endif %}
            {% endfor %}
            {% else %}
            {% for child in include.resource.children %}
            {% capture buildPath %}{{include.pathprefix}}/{{include.resource.path}}{% endcapture %}
            {% include nested.html resource=child pathprefix=buildPath  %}
            {% endfor %}
            {% endif %}

        </ul>
    </li>

{% else %}
    <li class="{{liClass}}">
        <a href="{{buildPath}}.html" class="hint--bounce hint--right" data-hint="{{include.resource.hover}}">
            <span>{{ include.resource.name }}</span>
        </a>
    </li>
{% endif %}